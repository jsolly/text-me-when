---
import NotificationCategory from "../common/NotificationCategory.astro";
import NotificationCheckbox from "../common/NotificationCheckbox.astro";
---

<div class="space-y-6">
  <div class="flex items-center space-x-2 mb-4">
    <div class="h-2 w-2 bg-blue-500 rounded-full"></div>
    <h3 class="text-sm font-medium text-slate-600">Daily Notifications</h3>
  </div>

  <NotificationCategory>
    <div class="mb-6">
      <label class="block text-sm font-medium text-slate-700 mb-1">
        Preferred Notification Time
      </label>
      <select 
        name="notification-time" 
        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
        <option value="morning">Morning (8 AM)</option>
        <option value="afternoon">Afternoon (2 PM)</option>
        <option value="evening">Evening (7 PM)</option>
      </select>
      <p class="mt-1 text-sm text-slate-500">
        Daily notifications will be sent at your preferred time
      </p>
    </div>
  </NotificationCategory>
  
  <NotificationCategory label="Astrological Events">
    <div x-data="{ allAstrological: false }">
      <NotificationCheckbox 
        id="astrological" 
        label="All astrological events" 
        description="Get notified about meteor showers, full moons, eclipses, and more"
        x-model="allAstrological"
        @click="$refs.astroChildren.querySelectorAll('input[type=checkbox]').forEach(checkbox => checkbox.checked = allAstrological)"
      />
      <div class="ml-8 space-y-3 mt-3" data-subcategories x-ref="astroChildren">
        <NotificationCheckbox id="meteor" label="Meteor shower alerts" />
        <NotificationCheckbox id="fullmoon" label="Full moon" />
        <NotificationCheckbox id="newmoon" label="New moon" />
        <NotificationCheckbox id="eclipse" label="Solar/Lunar eclipses" />
      </div>
    </div>
  </NotificationCategory>

  <NotificationCategory label="Historical Facts">
    <div x-data="{ allHistorical: false }">
      <NotificationCheckbox 
        id="historical" 
        label="All historical facts" 
        description="Get daily facts about science, space, technology, and culture"
        x-model="allHistorical"
        @click="$refs.historyChildren.querySelectorAll('input[type=checkbox]').forEach(checkbox => checkbox.checked = allHistorical)"
      />
      <div class="ml-8 space-y-3 mt-3" data-subcategories x-ref="historyChildren">
        <NotificationCheckbox 
          id="history-science" 
          label="Science & Discovery" 
          description="Notable scientific breakthroughs and discoveries"
        />
        <NotificationCheckbox 
          id="history-space" 
          label="Space Exploration" 
          description="Milestones in space exploration and astronomy"
        />
        <NotificationCheckbox 
          id="history-tech" 
          label="Technology" 
          description="Important moments in technological advancement"
        />
        <NotificationCheckbox 
          id="history-culture" 
          label="Culture & Society" 
          description="Significant cultural and societal events"
        />
      </div>
    </div>
  </NotificationCategory>
</div> 